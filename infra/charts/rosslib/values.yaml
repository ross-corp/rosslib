# Global settings
global:
  storageClass: "standard"

# API Service
api:
  image:
    repository: ghcr.io/tristansaldanha/rosslib/api
    tag: latest
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    port: 8080
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  env:
    JWT_SECRET: "dev-secret-change-in-production"
    MEILI_MASTER_KEY: "masterKey"
    MINIO_ACCESS_KEY: "rustfsadmin"
    MINIO_SECRET_KEY: "rustfsadmin"
    MINIO_BUCKET: "rosslib"
    # MINIO_ENDPOINT will be set in deployment template

# Webapp Service
webapp:
  image:
    repository: ghcr.io/tristansaldanha/rosslib/webapp
    tag: latest
    pullPolicy: IfNotPresent
  replicaCount: 1
  service:
    type: ClusterIP
    port: 3000
  ingress:
    enabled: false
    className: ""
    annotations: {}
    hosts:
      - host: chart-example.local
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls: []
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi
  env:
    NEXT_PUBLIC_API_URL: "http://localhost:8080" # This needs to be reachable from browser

# Postgres (dependency)
postgresql:
  enabled: true
  auth:
    username: rosslib
    password: rosslib
    database: rosslib
  primary:
    persistence:
      enabled: true
      size: 1Gi

# Redis (dependency)
redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: false
  master:
    persistence:
      enabled: true
      size: 1Gi

# Meilisearch (dependency)
meilisearch:
  enabled: true
  environment:
    MEILI_MASTER_KEY: "masterKey"
  persistence:
    enabled: true
    accessMode: ReadWriteOnce
    size: 1Gi

# RustFS (dependency)
rustfs:
  enabled: true
  replicaCount: 1
  mode:
    standalone:
      enabled: true
    distributed:
      enabled: false
  secret:
    rustfs:
      access_key: "rustfsadmin"
      secret_key: "rustfsadmin"
  service:
    type: ClusterIP
    endpoint:
      port: 9000
    console:
      port: 9001
  persistence:
    enabled: true
    size: 1Gi
  storageclass:
    name: standard
    dataStorageSize: 1Gi
    logStorageSize: 1Gi
